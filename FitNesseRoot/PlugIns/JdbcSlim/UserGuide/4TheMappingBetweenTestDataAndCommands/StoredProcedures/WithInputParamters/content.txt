#Copyright (C) 2015 by six42, All rights reserved. Contact the author via http://github.com/six42
#

!*> To avoid side effects we execute the test in a transaction
!|Script|SQLCommand|TransactionDatabase|
|open Connection                       |
|execute|begin transaction             |

*!

!3 Input Paramters are not jet supported, only a hardcoded test version

!|Define Properties|StoredProcedures   |
|key               |value              |
|.include          |TransactionDatabase|


!|Define Properties|inParameters|
|key               |value       |
|In                |1:0:0       |

!|  SQLCommand|StoredProcedures|select SQRT(?) as root|dbQueryParameters=inParameters|
|No           |root?                                                                 |
|9.0          |3.0                                                                   |

!|  SQLCommand|StoredProcedures|select LPAD(?, 7,'*') as myString|dbQueryParameters=inParameters|
|No           |myString?                                                                        |
|9.0          |****9.0                                                                          |

                                                             |

!*> Rollback the change to not impact future tests

!|Script|SQLCommand|TransactionDatabase|
|open Connection                       |
|execute|rollback                      |
|close Connection                      |

!4 Check that the rollback worked
!|SQLCommand|StartupDatabase|select * from TestData|Query                |
|ID         |Name           |Phone                 |City      |Profession|
|1          |Bill           |12345                 |Berlin    |Doctor    |
|2          |Ben            |6789                  |Denver    |Artist    |
|3          |Tom            |4567890               |Seoul     |Milkman   |
|4          |Till           |332211                |Berlin    |Senator   |
|5          |Sarah          |999999                |Paris     |Hero      |
|6          |James          |5432                  |London    |Butler    |
|7          |Bert           |432                   |Washington|President |
|8          |Kim            |1                     |New York  |Banker    |

*!